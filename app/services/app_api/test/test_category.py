import json
import unittest
from main import db
from main.api.models import Category
from test.base import BaseTestCase

# Helper function to add category entries to the DB
def create_category(name, icon):
    category = Category(name=name, icon=icon)
    db.session.add(category)
    db.session.commit()
    return category

# Tests for the Category Service
class TestCategoryService(BaseTestCase):
    # Shared icon test data - from Font Awesome http://fatopng.com/fontawesome-to-base64
    icon_heart = "data:image/png;base64,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"
    icon_music = "data:image/png;base64,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"

    # Basic happy path, ensure the /categories route behaves correctly
    def test_categories(self):
        category = create_category('Mammal', self.icon_heart)
        with self.client:
            response = self.client.get('/api/v1/categories')
            data = json.loads(response.data.decode())
            self.assertEqual(response.status_code, 200)
            self.assertEqual(len(data['categories']), 1)
            self.assertIn(category.name, data['categories'][0]['name'])
            self.assertIn(category.icon, data['categories'][0]['icon'])

    # Basic happy path, ensure the /categories/ route behaves correctly (trailing slash)
    def test_trailing_slash_categories(self):
        category = create_category('Mammal', self.icon_heart)
        with self.client:
            response = self.client.get('/api/v1/categories/')
            data = json.loads(response.data.decode())
            self.assertEqual(response.status_code, 200)
            self.assertEqual(len(data['categories']), 1)
            self.assertIn(category.name, data['categories'][0]['name'])
            self.assertIn(category.icon, data['categories'][0]['icon'])

    # Ensure the /categories route behaves correctly for multiple entries
    def test_multiple_categories(self):
        catMammal = create_category('Mammal', self.icon_heart)
        catPlant = create_category('Plant', self.icon_music)
        with self.client:
            response = self.client.get('/api/v1/categories')
            data = json.loads(response.data.decode())
            self.assertEqual(response.status_code, 200)
            self.assertEqual(len(data['categories']), 2)
            self.assertIn(catMammal.name, data['categories'][0]['name'])
            self.assertIn(catMammal.icon, data['categories'][0]['icon'])
            self.assertIn(catPlant.name, data['categories'][1]['name'])
            self.assertIn(catPlant.icon, data['categories'][1]['icon'])